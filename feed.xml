<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.5">Jekyll</generator><link href="https://pedroventura.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://pedroventura.github.io/" rel="alternate" type="text/html" /><updated>2024-10-29T17:36:50+00:00</updated><id>https://pedroventura.github.io/feed.xml</id><title type="html">Blog de Tecnología Pedro Ventura desde 2008</title><subtitle>Un blog sobre informática, tecnología, programación y otras curiosidades de Internet</subtitle><entry><title type="html">Autocomplementador en AJAX</title><link href="https://pedroventura.github.io/javascript/2008/08/14/autocomplementador-en-ajax.html" rel="alternate" type="text/html" title="Autocomplementador en AJAX" /><published>2008-08-14T00:00:00+00:00</published><updated>2008-08-14T00:00:00+00:00</updated><id>https://pedroventura.github.io/javascript/2008/08/14/autocomplementador-en-ajax</id><content type="html" xml:base="https://pedroventura.github.io/javascript/2008/08/14/autocomplementador-en-ajax.html"><![CDATA[<p><strong><em>Como hacer un Autocomplementador simple en AJAX</em></strong></p>
<p><a href="https://www.pedroventura.com/wp-content/uploads/2008/08/autocomplete_2.png"><img class="alignnone size-medium wp-image-16 alignright" style="float: right;" title="autocomplete_2" src="https://pedroventura.com/wp-content/uploads/2008/08/autocomplete_2-252x3001-1-1.png" alt="" width="252" height="300" /></a></p>
<p>Pasos para la implementación de éste módulo:</p>
<ul>
	<li>incluir el siguiente .js entre las etiquetas &lt;head&gt;&lt;/head&gt;</li>
</ul>
<p>Ver .js</p>

<p>y las funciones javascript que podréis ver en la <strong>Demo Online </strong></p>
<ul>
	<li>Incluir también los estilos predeterminados, también los podréis ver en el código fuente de éste archivo.</li>
</ul>
<ul>
	<li> En la carpeta donde se encuentra éste ejemplo hay un php "rpc.php" que contiene la llamada a la base de datos y el cual devuelve el contenido.</li>
</ul>
<p>[code lang=”php”]
    &amp;lt;?php</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// PHP5 Implementation - uses MySQLi.
// mysqli('localhost', 'yourUsername', 'yourPassword', 'yourDatabase');
$db = new mysqli('localhost', 'USERNAME' ,'PASSWORD', 'DATABASE');

if(!$db) {
// Show error if we cannot connect.
echo 'ERROR: Could not connect to the database.';
} else {
// Is there a posted query string?
if(isset($_POST['queryString'])) {
$queryString = $db-&amp;amp;gt;real_escape_string($_POST['queryString']);

// Is the string length greater than 0?

if(strlen($queryString) &amp;amp;gt;0) {
// Run the query: We use LIKE '$queryString%'
// The percentage sign is a wild-card, in my example of countries it works like this...
// $queryString = 'Uni';
// Returned data = 'United States, United Kindom';

// YOU NEED TO ALTER THE QUERY TO MATCH YOUR DATABASE.
// eg: SELECT yourColumnName FROM yourTable WHERE yourColumnName LIKE '$queryString%' LIMIT 10

$query = $db-&amp;amp;gt;query(&amp;amp;quot;SELECT your_column FROM your_db_table WHERE your_column LIKE '$queryString%' LIMIT 10&amp;amp;quot;);
if($query) {
// While there are results loop through them - fetching an Object (i like PHP5 btw!).
while ($result = $query -&amp;amp;gt;fetch_object()) {
// Format the results, im using &amp;amp;lt;li&amp;amp;gt; for the list, you can change it.
// The onClick function fills the textbox with the result.

// YOU MUST CHANGE: $result-&amp;amp;gt;value to $result-&amp;amp;gt;your_colum
echo '&amp;amp;lt;li onClick=&amp;amp;quot;fill(''.$result-&amp;amp;gt;value.'');&amp;amp;quot;&amp;amp;gt;'.$result-&amp;amp;gt;value.'&amp;amp;lt;/li&amp;amp;gt;';
}
} else {
echo 'ERROR: There was a problem with the query.';
}
} else {
// Dont do anything.
} // There is a queryString.
} else {
echo 'There should be no direct access to this script!';
}
}
?&amp;amp;gt; [/code]
</code></pre></div></div>

<p>Si usais SMARTY, habría que poner incluso menos código:
[code lang=”php”]
    &amp;lt;?
    include(&amp;quot;/ruta_smarty_donde_teneis/config.php&amp;quot;);
    include_once(&amp;quot;/ruta_smarty_donde_teneis/sql.lib.php&amp;quot;);
    abrirConexion();// o la funcion que hayas nombrado para crear una conexión
    $busqueda= $_POST[‘queryString’]; // $_POST[‘queryString’] es la variable que lleva lo que estamos insertando en el formulario de búsqueda
    $sql_search=&amp;quot;SELECT NOMBRE_CAMPO FROM NOMBRE_TABLA WHERE NOMBRE_CAMPO LIKE ‘$busqueda%’ LIMIT 10&amp;quot;;
    $db-&amp;gt;query($sql_search);
    //$searching = $db-&amp;gt;fetchObject();
    while ($searching = $db -&amp;gt;fetchObject())
    {
    echo ‘&amp;lt;li onClick=&amp;quot;fill(‘’.$searching-&amp;gt;NombreFamoso.’’);&amp;quot;&amp;gt;’.$searching-&amp;gt;NombreFamoso.’&amp;lt;/li&amp;gt;’;
    }</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>?&amp;amp;gt; [/code]
</code></pre></div></div>]]></content><author><name></name></author><category term="Javascript" /><category term="jquery" /><category term="tutoriales" /><summary type="html"><![CDATA[Como hacer un Autocomplementador simple en AJAX Pasos para la implementación de éste módulo: incluir el siguiente .js entre las etiquetas &lt;head&gt;&lt;/head&gt; Ver .js]]></summary></entry></feed>